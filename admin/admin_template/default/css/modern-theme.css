/**
 * SLiMS Modern Admin Theme v2.2
 * Fix: Loader & Navbar
 */

:root {
    --primary: #2563eb;
    --primary-hover: #1d4ed8;
    --primary-light: #dbeafe;
    --slate-50: #f8fafc;
    --slate-100: #f1f5f9;
    --slate-200: #e2e8f0;
    --slate-300: #cbd5e1;
    --slate-400: #94a3b8;
    --slate-500: #64748b;
    --slate-600: #475569;
    --slate-700: #334155;
    --slate-800: #1e293b;
    --slate-900: #0f172a;
    --success: #10b981;
    --warning: #f59e0b;
    --danger: #ef4444;
    --info: #06b6d4;
    --sidebar-w: 260px;
    --header-h: 56px;
}

/* Base */
body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
    background: var(--slate-100) !important;
    color: var(--slate-700) !important;
    font-size: 14px !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* ============================================
   LOADER - Hide it properly
   ============================================ */
.loader {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

.loader.hidden {
    display: none !important;
}

/* ============================================
   SIDEBAR
   ============================================ */
#sidepan {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    bottom: 0 !important;
    width: var(--sidebar-w) !important;
    background: var(--slate-900) !important;
    z-index: 1000 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
}

#sidepan::before,
#sidepan:before {
    display: none !important;
    background: none !important;
    content: none !important;
    width: 0 !important;
    height: 0 !important;
}

.sidebar-brand {
    padding: 16px 20px !important;
    border-bottom: 1px solid rgba(255,255,255,0.1) !important;
}

.sidebar-brand a {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
    color: #fff !important;
}

.sidebar-brand svg, .sidebar-logo {
    width: 32px !important;
    height: 32px !important;
}

.sidebar-brand-text {
    font-size: 15px !important;
    font-weight: 600 !important;
    color: #fff !important;
}

/* User */
#sidepan .s-user {
    padding: 16px 20px !important;
    background: rgba(255,255,255,0.03) !important;
    border-bottom: 1px solid rgba(255,255,255,0.1) !important;
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;
}

#sidepan .s-user::after { display: none !important; }

.s-user-photo {
    width: 40px !important;
    height: 40px !important;
    border-radius: 8px !important;
    overflow: hidden !important;
    border: 2px solid rgba(255,255,255,0.15) !important;
}

.s-user-photo img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
}

.s-user-name {
    color: #fff !important;
    font-size: 14px !important;
    font-weight: 600 !important;
    margin: 0 !important;
}

#sidepan .s-user a { color: var(--slate-400) !important; font-size: 12px !important; }

/* Menu */
#sidepan .scroll-content { padding: 12px !important; }

#sidepan .subMenuHeader {
    color: var(--slate-500) !important;
    font-size: 10px !important;
    font-weight: 600 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.08em !important;
    padding: 16px 12px 8px !important;
    background: none !important;
}

#sidepan .subMenuItem {
    display: block !important;
    padding: 10px 12px !important;
    margin: 2px 0 !important;
    color: var(--slate-300) !important;
    font-size: 13px !important;
    font-weight: 500 !important;
    border-radius: 6px !important;
    background: transparent !important;
}

#sidepan .subMenuItem:hover {
    background: rgba(255,255,255,0.08) !important;
    color: #fff !important;
}

#sidepan .subMenuItem.curModuleLink {
    background: var(--primary) !important;
    color: #fff !important;
}

#sidepan .subMenuItem:first-child {
    background: rgba(239,68,68,0.12) !important;
    color: #fca5a5 !important;
}

/* ============================================
   HEADER / NAVBAR - Fixed horizontal
   ============================================ */
#header {
    position: fixed !important;
    top: 0 !important;
    left: var(--sidebar-w) !important;
    right: 0 !important;
    height: var(--header-h) !important;
    background: #fff !important;
    border-bottom: 1px solid var(--slate-200) !important;
    box-shadow: none !important;
    z-index: 900 !important;
    display: flex !important;
    align-items: center !important;
    padding: 0 16px !important;
}

#mainMenu {
    width: 100% !important;
    height: 100% !important;
    display: flex !important;
    align-items: center !important;
}

/* Force horizontal menu */
#mainMenu #menuList,
#menuList {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;
    align-items: center !important;
    list-style: none !important;
    margin: 0 !important;
    padding: 0 !important;
    gap: 2px !important;
    line-height: normal !important;
    height: auto !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    white-space: nowrap !important;
}

#mainMenu #menuList li,
#menuList li {
    display: inline-flex !important;
    float: none !important;
    margin: 0 !important;
    padding: 0 !important;
    flex-shrink: 0 !important;
}

#mainMenu #menuList li a,
#menuList li a,
#mainMenu a {
    display: inline-flex !important;
    align-items: center !important;
    padding: 7px 12px !important;
    color: var(--slate-600) !important;
    font-size: 13px !important;
    font-weight: 500 !important;
    border-radius: 6px !important;
    white-space: nowrap !important;
    background: transparent !important;
    text-decoration: none !important;
    line-height: 1.4 !important;
    height: auto !important;
}

#mainMenu #menuList li a:hover,
#menuList li a:hover,
#mainMenu a:hover {
    background: var(--slate-100) !important;
    color: var(--slate-800) !important;
}

#mainMenu #menuList li a.menuCurrent,
#menuList li a.menuCurrent {
    background: var(--primary-light) !important;
    color: var(--primary) !important;
}

#mainMenu #menuList li a span,
#menuList li a span {
    display: inline !important;
}

/* Hide OPAC link on small screens */
.opac { display: inline-flex !important; }

/* Menu icons */
#mainMenu .menu::before { font-family: 'FontAwesome' !important; margin-right: 6px !important; font-size: 12px !important; opacity: 0.7 !important; }
.menu.home::before { content: '\f015' !important; }
.menu.opac::before { content: '\f06e' !important; }
.menu.logout::before { content: '\f08b' !important; color: var(--danger) !important; }
.menu.bibliography::before { content: '\f02d' !important; }
.menu.circulation::before { content: '\f0ec' !important; }
.menu.membership::before { content: '\f0c0' !important; }
.menu.master_file::before { content: '\f1c0' !important; }
.menu.stock_take::before { content: '\f0ae' !important; }
.menu.system::before { content: '\f013' !important; }
.menu.reporting::before { content: '\f080' !important; }
.menu.serial_control::before { content: '\f1ea' !important; }
.menu.branch_management::before { content: '\f1ad' !important; }

/* ============================================
   MAIN CONTENT
   ============================================ */
#mainContent {
    margin-left: var(--sidebar-w) !important;
    margin-top: var(--header-h) !important;
    padding: 24px !important;
    min-height: calc(100vh - var(--header-h)) !important;
    background: var(--slate-100) !important;
}

/* ============================================
   PAGE HEADER
   ============================================ */
.menuBox {
    background: #fff !important;
    border-radius: 8px !important;
    border: 1px solid var(--slate-200) !important;
    box-shadow: none !important;
    margin-bottom: 20px !important;
}

.menuBoxInner {
    padding: 16px 20px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 12px !important;
    background: none !important;
}

.menuBoxInner::before { display: none !important; }

.per_title h2 {
    font-size: 18px !important;
    font-weight: 600 !important;
    color: var(--slate-800) !important;
    margin: 0 !important;
    background: none !important;
}

.sub_section { position: static !important; }
.sub_section .btn-group { position: static !important; display: flex !important; gap: 8px !important; }

/* ============================================
   BUTTONS
   ============================================ */
.btn {
    display: inline-flex !important;
    align-items: center !important;
    gap: 6px !important;
    padding: 8px 14px !important;
    font-size: 13px !important;
    font-weight: 500 !important;
    border-radius: 6px !important;
    border: none !important;
    cursor: pointer !important;
    line-height: 1.4 !important;
}

.btn-primary { background: var(--primary) !important; color: #fff !important; }
.btn-primary:hover { background: var(--primary-hover) !important; color: #fff !important; }
.btn-success { background: var(--success) !important; color: #fff !important; }
.btn-warning { background: var(--warning) !important; color: #fff !important; }
.btn-danger { background: var(--danger) !important; color: #fff !important; }
.btn-info { background: var(--info) !important; color: #fff !important; }
.btn-default, .btn-secondary { background: #fff !important; color: var(--slate-700) !important; border: 1px solid var(--slate-300) !important; }
.btn-sm { padding: 6px 10px !important; font-size: 12px !important; }
.btn-xs { padding: 4px 8px !important; font-size: 11px !important; }

/* ============================================
   TABLES
   ============================================ */
table { width: 100% !important; border-collapse: collapse !important; background: #fff !important; }
table thead, .dataListHeader { background: var(--slate-50) !important; }
table th, .dataListHeader td { padding: 12px 16px !important; font-size: 11px !important; font-weight: 600 !important; color: var(--slate-500) !important; text-transform: uppercase !important; letter-spacing: 0.05em !important; border-bottom: 1px solid var(--slate-200) !important; background: var(--slate-50) !important; }
table td, .alterCell, .alterCell2 { padding: 12px 16px !important; border-bottom: 1px solid var(--slate-100) !important; color: var(--slate-600) !important; font-size: 13px !important; background: #fff !important; }
table tbody tr:hover td, .alterCell:hover, .alterCell2:hover { background: var(--slate-50) !important; }

/* ============================================
   CARDS
   ============================================ */
.card { background: #fff !important; border-radius: 8px !important; border: 1px solid var(--slate-200) !important; }
.card-header { padding: 14px 20px !important; background: var(--slate-50) !important; border-bottom: 1px solid var(--slate-200) !important; font-weight: 600 !important; }
.card-body { padding: 20px !important; }

/* ============================================
   FORMS
   ============================================ */
.form-control, input[type="text"], input[type="email"], input[type="password"], input[type="number"], select, textarea {
    padding: 9px 12px !important;
    font-size: 14px !important;
    border: 1px solid var(--slate-300) !important;
    border-radius: 6px !important;
    background: #fff !important;
}
.form-control:focus, input:focus, select:focus, textarea:focus {
    outline: none !important;
    border-color: var(--primary) !important;
    box-shadow: 0 0 0 3px var(--primary-light) !important;
}

/* ============================================
   BADGES
   ============================================ */
.badge, .label { display: inline-flex !important; padding: 3px 8px !important; font-size: 11px !important; font-weight: 600 !important; border-radius: 4px !important; }
.badge-primary, .label-primary { background: var(--primary-light) !important; color: var(--primary) !important; }
.badge-success, .label-success { background: #d1fae5 !important; color: #065f46 !important; }
.badge-warning, .label-warning { background: #fef3c7 !important; color: #92400e !important; }
.badge-danger, .label-danger { background: #fee2e2 !important; color: #991b1b !important; }
.badge-info, .label-info { background: #cffafe !important; color: #0e7490 !important; }
.badge-secondary, .label-default { background: var(--slate-100) !important; color: var(--slate-600) !important; }

/* ============================================
   ALERTS
   ============================================ */
.alert { padding: 12px 16px !important; border-radius: 6px !important; font-size: 13px !important; }
.alert-success { background: #d1fae5 !important; color: #065f46 !important; border: 1px solid #a7f3d0 !important; }
.alert-warning { background: #fef3c7 !important; color: #92400e !important; border: 1px solid #fde68a !important; }
.alert-danger { background: #fee2e2 !important; color: #991b1b !important; border: 1px solid #fecaca !important; }
.alert-info { background: #cffafe !important; color: #0e7490 !important; border: 1px solid #a5f3fc !important; }

/* ============================================
   BRANCH SELECTOR
   ============================================ */
.branch-selector { position: fixed !important; top: 10px !important; right: 16px !important; z-index: 950 !important; }
.branch-selector select { padding: 6px 28px 6px 10px !important; font-size: 12px !important; border: 1px solid var(--slate-300) !important; border-radius: 6px !important; background: #fff url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 12 12'%3E%3Cpath fill='%23475569' d='M6 8L1 3h10z'/%3E%3C/svg%3E") no-repeat right 8px center !important; appearance: none !important; }

/* ============================================
   FOOTER
   ============================================ */
footer { margin-left: var(--sidebar-w) !important; padding: 14px 24px !important; background: #fff !important; border-top: 1px solid var(--slate-200) !important; color: var(--slate-500) !important; font-size: 13px !important; }

/* ============================================
   FIELDSET
   ============================================ */
fieldset.s-fieldset { background: #fff !important; border: 1px solid var(--slate-200) !important; border-radius: 8px !important; padding: 20px !important; }

/* ============================================
   SCROLLBAR
   ============================================ */
::-webkit-scrollbar { width: 6px !important; height: 6px !important; }
::-webkit-scrollbar-track { background: transparent !important; }
::-webkit-scrollbar-thumb { background: var(--slate-300) !important; border-radius: 3px !important; }
#sidepan::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15) !important; }

/* ============================================
   SIDEBAR TOGGLE
   ============================================ */
#sidebarToggle { background: none !important; border: none !important; padding: 8px !important; margin-right: 8px !important; color: var(--slate-500) !important; cursor: pointer !important; border-radius: 6px !important; display: flex !important; align-items: center !important; }
#sidebarToggle:hover { background: var(--slate-100) !important; color: var(--slate-700) !important; }

/* Collapsed */
body.sidebar-collapsed #sidepan { width: 64px !important; }
body.sidebar-collapsed #sidepan .sidebar-brand-text,
body.sidebar-collapsed #sidepan .s-user-name,
body.sidebar-collapsed #sidepan .s-user > a:last-child,
body.sidebar-collapsed #sidepan .subMenuHeader { display: none !important; }
body.sidebar-collapsed #sidepan .sidebar-brand { padding: 16px 12px !important; justify-content: center !important; }
body.sidebar-collapsed #sidepan .s-user { padding: 12px !important; justify-content: center !important; }
body.sidebar-collapsed #sidepan .subMenuItem { padding: 10px !important; text-align: center !important; }
body.sidebar-collapsed #sidepan .subMenuItem span { display: none !important; }
body.sidebar-collapsed #header { left: 64px !important; }
body.sidebar-collapsed #mainContent { margin-left: 64px !important; }
body.sidebar-collapsed footer { margin-left: 64px !important; }

/* ============================================
   RESPONSIVE
   ============================================ */
@media (max-width: 768px) {
    #header { left: 0 !important; }
    #sidepan { transform: translateX(-100%) !important; transition: transform 0.2s ease !important; }
    #sidepan.show { transform: translateX(0) !important; }
    #mainContent { margin-left: 0 !important; }
    footer { margin-left: 0 !important; }
    .branch-selector { display: none !important; }
}

@media print {
    #sidepan, #header, .branch-selector, .sub_section { display: none !important; }
    #mainContent { margin: 0 !important; padding: 0 !important; }
}
